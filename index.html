<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HBD Jaimy...</title>

    <!-- CSS -->
    <link rel="stylesheet" href="./file/default.css">

    <!-- JS -->
    <script src="./file/jquery.min.js"></script>
    <script src="./file/jscex.min.js"></script>
    <script src="./file/jscex-parser.js"></script>
    <script src="./file/jscex-jit.js"></script>
    <script src="./file/jscex-builderbase.min.js"></script>
    <script src="./file/jscex-async.min.js"></script>
    <script src="./file/jscex-async-powerpack.min.js"></script>
    <script src="./file/function.js"></script>
    <script src="./file/love.js"></script>

    <script>
        function playAudio() {
            const audio = document.getElementById("myAudio");
            audio.play().catch(() => {});
        }
    </script>
</head>

<body>
<div id="main">

    <div id="error" style="display:none;">
        Please use Chrome or Firefox
    </div>

    <!-- AUDIO (autoplay fixed for mobile) -->
    <audio id="myAudio" loop>
        <source src="./aud.mp3" type="audio/mpeg">
    </audio>

    <div id="wrap">
        <div id="text">
            <div id="code" style="display:none;">
                <span class="say">Hey you üíû</span><br>
                <span class="say">Happy Birthday üéà</span><br>
                <span class="say">May God bless you</span><br>
                <span class="say">And give u many happiness üíï</span><br>
                <span class="say">Just saying... you're pretty awesome ‚ù§Ô∏è</span><br>
                <span class="say">Sending good vibes and maybe a wink üòâ</span><br>
                <span class="say">Hope u have a great day today ‚ù§Ô∏èüòò</span><br>
            </div>
        </div>

        <div id="clock-box">
            <span id="clock">577 days 0 hours 0 minutes 0 seconds</span>
        </div>

        <canvas id="canvas" width="1100" height="680"></canvas>
    </div>
</div>

<script>
(function () {
    var canvas = $('#canvas');

    if (!canvas[0].getContext) {
        $("#error").show();
        return;
    }

    var width = canvas.width();
    var height = canvas.height();
    canvas.attr("width", width);
    canvas.attr("height", height);

    var opts = {
        seed: { x: width / 2 - 20, color: "rgb(190, 26, 37)", scale: 2 },
        branch: [[535,680,570,250,500,200,30,100]],
        bloom: { num: 700, width: 1080, height: 650 },
        footer: { width: 1200, height: 5, speed: 10 }
    };

    var tree = new Tree(canvas[0], width, height, opts);
    var seed = tree.seed;
    var foot = tree.footer;
    var hold = 1;

    canvas.on("click", function () {
        playAudio();
        hold = 0;
        canvas.off();
    });

    var runAsync = eval(Jscex.compile("async", function () {
        seed.draw();
        while (hold) $await(Jscex.Async.sleep(10));
        while (seed.canScale()) {
            seed.scale(0.95);
            $await(Jscex.Async.sleep(10));
        }
        while (seed.canMove()) {
            seed.move(0, 2);
            foot.draw();
            $await(Jscex.Async.sleep(10));
        }
        while (tree.canGrow()) {
            tree.grow();
            $await(Jscex.Async.sleep(10));
        }
        while (tree.canFlower()) {
            tree.flower(2);
            $await(Jscex.Async.sleep(10));
        }
        $("#code").show().typewriter();
    }));

    runAsync().start();
})();
</script>
</body>
</html>
